
<div class="row center">
	<div class="col s6 offset-s3" >
		<div class="card-panel skribl-primary-color" >

			<i class="mdi-content-clear right selectable-white" ng-click="appData.toggleUI(appData.ui.metaAddLib)"></i>

			<h5 class="selectable-white" ng-click="appData.toggleUI(appData.ui.metaAddLib)">
				Add Publication to library
			</h5>
			<ul ng-show="appData.ui.metaAddLib.value">
				<div ng:repeat="lib in data.userLibrariesNames">
					<li class="selectable-white" ng-click="publications.addPublications(lib, data.currentMetaData.id)">
						{{lib}}
					</li>
					<hr>
				</div>
			</ul>
		</div>
	</div>
</div>

<div class="row center">
	
	<div class="row">
		<form class="col s12">

			<!-- authors -->
			<h5 class="row center">
				Authors
			</h5>
			
			<!-- begin authors -->
			<div ng:repeat="author in data.currentMetaData.authors">

				<div class="col s4">
					<div class="card-panel skribl-primary-color" >


						<h5 class="selectable-white">
							{{author.lastName}}, {{author.firstName}} 
						</h5>
						<br>
						<div class="row">
							<div class="col s8 offset-s2">
								<img src="img/avatar.jpg" alt="" class="circle imgopac" style="width:100%">
							</div>
						</div>
						
						
						<!-- search -->
						<div class="selectable-white center" ng-click="publications.togglePotential(author)">
							<a class="btn-floating z-depth-2" ng-hide="author.potentialEnabled">
								<i class="mdi-action-search"></i>
							</a>
						</div>
						

						<div class="card-panel white" ng-show="author.potentialEnabled">

							<i class="mdi-content-clear right" ng-click="publications.togglePotential(author)"></i>
							

							<div class="row">
								<div class="input-field col s12">
									<input id="author" type="text" class="validate" ng-model="author.searchFirst" required>
									<label class="active" for="author">
										first name(s)
									</label>
								</div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<input id="author" type="text" class="validate" ng-model="author.searchLast" required>
									<label class="active" for="author">
										last name
									</label>
								</div>
							</div>

							<!-- search button -->
							<div class="selectable-white center">
								<a class="btn-floating z-depth-2" ng-click="publications.searchAuthors(author)">
									<i class="mdi-action-search"></i>
								</a>
								
								<a class="btn-floating z-depth-2" ng-show="author.allowSet" ng-click="publications.setAuthor(author)">
									<i class="mdi-content-send"></i>
								</a>

								<br><br>

								<a class="btn-floating z-depth-2" ng-click="publications.removeAuthorFromMetaData($index)">
									<i class="mdi-action-delete"></i>
								</a>

								
							</div>

							

							<div class="small-spacer"></div>

							
							<ul>
								<div ng:repeat="potential in author.potential">

									<li class="selectable-black" ng-click="publications.setPotentialAsSearch(author, potential)">
										<p>{{potential.firstName}} &nbsp;
											{{potential.lastName}}
										</p>
									</li>
									<hr>
								</div>
							</ul>
						</div>
					</div>

				</div>
			</div>
			<!-- end authors -->
			<!-- begin add author -->
			<div class="col s4">
				<div class="card-panel skribl-primary-color" >
					<div class="selectable-white" ng-click="publications.addAuthorToMetaData()">
						<i class="mdi-content-add-circle large"></i>
					</div>
				</div>
			</div>
			<!-- end add author -->


			<div class="progress">
				<div class="determinate" style="width: 0%">
				</div>
			</div>

			<!-- authors -->
			<h5 class="row center">
				researchDomains
			</h5>


			<!-- begin add author -->
			<div class="col s12">
				<div class="card-panel skribl-primary-color" >

					<h5 class="white-text"> current research domains :  </h5>
					
					<div ng:repeat="domain in data.currentMetaData.researchDomains" class="selectable-white">
					<div class="row" ng-click="appData.removeResearchDomain($index)">
						<i class="mdi-action-delete left">
							{{appData.getMajorName(domain.majorID)}} :: 
							{{appData.getMinorName(domain.majorID, domain.minorID)}}
						</i>
						<br>
						<hr>
						</div>
						
					</div>

					<br>
					
					<div class="row">
					<div class="selectable-white" ng-click="appData.toggleUI(appData.ui.metaAddResearchDomain)">
						<i class="mdi-content-add-circle large" ng-hide="appData.ui.metaAddResearchDomain.value" ></i>
						<i class="mdi-navigation-close large" ng-show="appData.ui.metaAddResearchDomain.value"></i>
					</div>
				</div>
				</div>
			</div>
			<!-- end add author -->
			
			




			<div ng:repeat="domain in appData.researchDomains" ng-show="appData.ui.metaAddResearchDomain.value">

				<div class="col s4">
					<div class="card-panel skribl-primary-color" >
						<h5 class="selectable-white" ng-click="domain.toggle()">
							{{domain.major.name}}
						</h5>

						<div ng-show="domain.selected">
							<div ng:repeat="minor in domain.minor">
								<div class="selectable-white" ng-click="appData.addResearchDomain(domain.major.ID, minor.ID)">
									{{minor.name}}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>



			<div class="progress">
				<div class="determinate" style="width: 0%">
				</div>
			</div>

			<!-- Title -->
			<div class="row">
				<div class="input-field col s12">
					<i class="mdi-action-label-outline prefix"></i>
					<input id="upload_title" type="text" class="validate" ng-model="data.currentMetaData.title" required>
					<label class="active" for="upload_title">Title</label>
				</div>
			</div>


			<!-- abstract -->
			<div class="row">
				<div class="input-field col s12">
					<i class="mdi-action-label-outline prefix"></i>
					<textarea id="upload_abstract" length="120"ng-model="data.currentMetaData.abstract" required class="materialize-textarea"></textarea>
					<label class="active" for="upload_abstract">Abstract</label>
				</div>
			</div>

			<!-- year -->
			<div class="row">
				<div class="input-field col s12">
					<i class="mdi-action-label-outline prefix"></i>
					<input id="upload_year" type="number" class="validate" ng-model="data.currentMetaData.year" required>
					<label class="active" for="upload_year">Publication Year</label>
				</div>
			</div>


			<!-- publisher -->
			<div class="row">
				<div class="input-field col s12">
					<i class="mdi-action-label-outline prefix"></i>
					<input id="upload_publisher" type="text" class="validate" ng-model="data.currentMetaData.publisher" required>
					<label class="active" for="upload_publisher">publisher name</label>
				</div>
			</div>


			<!-- type -->
			<div class="row center">
				<input name="group2" type="radio" id="test3" ng-model="data.currentMetaData.type" value="journal"/>
				<label for="test3">Journal</label>

				<input name="group2" type="radio" id="test4" ng-model="data.currentMetaData.type" value="proceeding"/>
				<label for="test4">Proceeding</label>
			</div>

			<!-- journal specific -->
			<div ng-show="data.currentMetaData.type==='journal'">
				<!-- journal -->
				<div class="row">
					<div class="input-field col s12">
						<i class="mdi-action-label-outline prefix"></i>
						<input id="upload_journal" type="text" class="validate" ng-model="data.currentMetaData.journal" required>
						<label class="active" for="upload_journal">Journal name</label>
					</div>
				</div>
			</div>

			<!-- proceeding specific -->
			<div ng-show="data.currentMetaData.type==='proceeding'">
				show for proceeding
			</div>
			
			<br>

			<!-- Private -->
			Private
			<div class="switch">
				<label>
					Off
					<input type="checkbox" ng-model="data.currentMetaData.private">
					<span class="lever"></span>
					On
				</label>
			</div>

			<br>
			
			<!-- delete button -->
			<!-- not yet implemented -->
			<div class="row center">
				<a class="waves-effect waves-light btn" style="color:white;" ng-click="publications.deletePublication('Uploaded', data.currentMetaData.id)">
					<i class="mdi-action-delete left"></i>
					delete
				</a>
			</div>
			

		</form>

	</div>
</div>